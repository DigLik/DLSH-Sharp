# Конфигурация и расширения

Для настройки DLSH-Sharp используется язык C# (C# Scripting API). Это позволяет использовать всю мощь платформы .NET прямо в файлах конфигурации.

Файл конфигурации должен располагаться по пути `~/.dlshrc.csx`.

## Хуки (Hooks)

DLSH использует два основных хука, которые представляют собой делегаты (лямбда-выражения) в объекте глобального контекста:

### `Repeat`
Вызывается в начале каждого цикла REPL. Основное назначение — обновление состояния оболочки, например, генерация приглашения ко вводу (PS1).

Пример настройки промпта:
```csharp
Repeat = () => {
    var user = Color(GetUser(), 76, 181, 148);
    var dir = Color(GetCurrentDir(), 76, 140, 239);
    var branch = IsGitRepo() ? " [" + GetGitBranch() + "]" : "";
    
    SetVar("PS1", $"{user} {dir}{branch} {Bold(">>")} ");
};

```

### `OnInput`

Вызывается после того, как пользователь ввел строку, но до её стандартной обработки. Если хук перехватывает ввод, он может либо выполнить команду самостоятельно через `Run()`, либо изменить её.

Пример обработки ввода:

```csharp
OnInput = (line) => {
    if (line == "status") {
        Print("System is running on .NET 10");
        return; 
    }
    
    // Выполнение стандартной команды
    Run(line);
};

```

## Функции API DLSH

Эти функции доступны напрямую в скриптах конфигурации:

| Категория | Функция | Описание |
| --- | --- | --- |
| **Система** | `GetUser()` | Возвращает имя текущего пользователя. |
|  | `GetCurrentDir()` | Возвращает текущий рабочий каталог. |
| **Переменные** | `GetVar(name)` | Получает значение переменной окружения. |
|  | `SetVar(name, val)` | Устанавливает значение переменной окружения. |
| **Алиасы** | `AliasAdd(n, c)` | Создает новый алиас. |
|  | `AliasRemove(n)` | Удаляет указанный алиас. |
|  | `AliasClear()` | Очищает все алиасы. |
| **Git** | `IsGitRepo()` | Проверяет, находится ли путь в Git-репозитории. |
|  | `GetGitBranch()` | Возвращает название текущей ветки. |
|  | `GitIsDirty()` | `true`, если в репозитории есть изменения. |
| **Оформление** | `Color(t, r, g, b)` | Окрашивает текст в RGB цвет. |
|  | `Bold(t)` | Делает текст жирным. |